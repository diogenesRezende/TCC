\chapter{QUADRO METODOLÓGICO}

	\par Nesse capítulo serão apresentados os métodos adotados para se realizar esta
pesquisa, tais como tipo de pesquisa, contexto, procedimentos, entre outros.

\section{Tipo de pesquisa}
	
	\par Uma pesquisa é o ato de buscar e procurar pela resposta de algo.
\citeonline[p. 15]{markoni2002} definem pesquisa como “uma indagação minuciosa
ou exame crítico e exaustivo na procura de fatos e princípios”.

	\par Existem diversos tipos de pesquisa, no entanto percebeu-se que para o
propósito desta, a mais indicada foi a pesquisa aplicada, pois está se
desenvolvendo um projeto real que poderá ser utilizado por qualquer instituição
de ensino, mas que não mudará a forma com que as pessoas recebam suas
informações, apenas acrescentará mais uma opção de consultá-las.

	\par Segundo \citeonline[p. 15]{markoni2002}, uma pesquisa do tipo aplicada
“caracteriza-se por seu interesse prático, isto é, que os resultados sejam
aplicados ou utilizados, imediatamente, na solução de problemas que ocorrem na
realidade”.

	\par Dessa maneira, percebeu-se que esta pesquisa enquadra-se no tipo de pesquisa
aplicada, pois com a execução da mesma resolve um problema específico, e para
isso está desenvolvendo-se um aplicativo para dispositivos móveis que facilitará aos
graduandos acessarem o sistema \textit{web} de uma universidade.

\section{Contexto de pesquisa}

	\par Essa pesquisa será benéfica a qualquer instituição educacional que possua
um portal acadêmico \textit{online}, pois facilitará o acesso dos discentes às suas
informações escolares.

	\par Este trabalho visa desenvolver um aplicativo para dispositivos móveis, 
com plataforma \textit{Android}, o qual notifica os usuários quando houver alguma
atualização nos seus dados, como por exemplo ao ser lançada a nota de uma prova.
	
	\par O aluno consegue acessar o aplicativo com o mesmo \textit{login} do
sistema \textit{web}. O utilitário acessa o \textit{webservice} que é
responsável por buscar as informações no banco de dados e apresentá-las no
dispositivo.
	
\section{Instrumentos}

	\par Pode-se dizer que um questionário é uma forma de coletar informações
através de algumas perguntas feitas a um público específico. Segundo
\citeonline{gunther2003}, o questionário pode ser definido como um conjunto
de perguntas que mede a opinião e interesse do respondente.

	\par Foi realizado um questionário simples, que está apresentado na Figura
\ref{fig:qm1}, contendo quatro perguntas e enviado para \textit{e-mails} de
alguns alunos da universidade. O foco desse questionário era saber o motivo pelo qual
os usuários mais acessavam o portal do aluno e se tinham alguma dificuldade em
encontrar o que procuravam. Obteve-se um total de treze respostas, no qual
pode-se perceber que a maioria dos entrevistados afirmam terem dificuldades
para encontrar o que precisam e que o sistema não avisa quando ocorre alguma
alteração. Sobre o motivo do acesso cem por cento respondeu que entram no
sistema web para consultar suas notas.
\pagebreak
\begin{figure}[h!]
	\centerline{\includegraphics[scale=0.5]{./imagens/2_q_metodologico/qm1.png}}
	\caption[Quetionário Aplicado]{Quetionário Aplicado.
		\textbf{Fonte:}Elaborado pelos autores.}
	\label{fig:qm1}
\end{figure}
	

	\par Outro instrumento utilizado para realizar esta pesquisa foram as
reuniões, ou seja, reunir-se com uma ou mais pessoas em um local, físico ou
remotamente para tratar algum assunto específico. Para
\citeonline{ferreira1999}, reunião é o ato de encontro entre algumas pessoas em
um determinado local, com finalidade de tratar qualquer assunto.

	\par Durante a pesquisa, foram realizadas reuniões entre os participantes com
o objetivo de discutir o andamento das tarefas pela qual cada integrante ficou
responsável. Além disso entravam em discussão, nessas reuniões, o cumprimento
das metas propostas por cada participante e o estabelecimento de novas metas.
Foram utilizadas nesta pesquisa, referências de livros, revistas, manuais e
\textit{web sites}.


\section{Procedimentos e Resultados}
	
	\par O primeiro procedimento realizado para chegar à pesquisa proposta, foi
planejar o software através da linguagem UML, onde foi necessário a instalação
da ferramenta \textit{Astah} na sua versão 6.8.0.37.

	\par Sabendo-se que o planejamento é um passo importante, além do levantamento
de requisitos foram utilizados os diagramas de UML para nortear o
desenvolvimento. Para se ter uma visão das funcionalidades do sistema por parte
do usuário foi criado o diagrama de casos de uso do aplicativo, como demostra
na Figura \ref{fig:qm2}
		
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.4]{./imagens/2_q_metodologico/qm2.png}}
			\caption[Diagrama de Casos de Uso]{Diagrama de Casos de Uso.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm2}
		\end{figure}
		
	\par Logo após, foi projetado o diagrama de atividades para se ter uma visão
da sequência do fluxo do sistema, conforme mostra a Figura \ref{fig:qm3}.
		
		
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.4]{./imagens/2_q_metodologico/qm3.png}}
			\caption[Diagrama de atividades]{Diagrama de atividades.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm3}
		\end{figure}
		
	
	\par Para iniciar o desenvolvimento do aplicativo, primeiramente fez-se
necessária a instalação e configuração da plataforma \textit{Android Studio}
versão 1.1.0 e \textit{Android SDK} versão 24.0.2.

	\par Logo após a configuração dos ambientes de desenvolvimento, o primeiro
passo foi a criação de uma \textit{activity main}, denominada
\textit{MainActivity}, a qual será executada quando a aplicação for iniciada. O
tipo de \textit{activity} escolhida é do tipo \textit{Navigation Drawer
Layout}. Na Figura \ref{fig:qm4}, pode-se ver o método
\texttt{onNavigationDrawerItemSelected()}, que tem por finalidade mostrar as
opções de navegação e o que deverá acontecer quando uma delas for clicada. Um
exemplo, caso o usuário escolha o item Notas, o software executará o
\textit{case} um, o qual criará uma \textit{intent} e chamará a classe
\texttt{ListaNotasActivity}.
	
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.4]{./imagens/2_q_metodologico/qm4.png}}
			\caption[\textit{MainActivity}]{\textit{MainActivity}.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm4}
		\end{figure}
		
	\par O próximo passo, foi criar a \textit{activity Home}, o qual trará uma
lista de \textit{sites} uteis, com as opções Univás, MEC, Fies, Prouni e
\textit{Google} acadêmico. Para que essa lista aparecesse foi utilizada uma
\textit{activity} do tipo \textit{Master/Deital Flow} que já traz consigo o
\textit{widget} de \textit{ListView}. Na Figura \ref{fig:qm5}, pode-se ver a
classe \texttt{DummyContent}, local onde é declarado a lista de sites.
	
		\pagebreak
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.5]{./imagens/2_q_metodologico/qm5.png}}
			\caption[Classe \textit{DummyContent}]{Classe \textit{DummyContent}.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm5}
		\end{figure}

	\par Quando clicado em algum item, é executada a classe
\texttt{ItemDetailActivity}, que chamará o \texttt{ItemDetailFragment},
responsável por carregar o \textit{site} em questão no \textit{layout} do
aplicativo. Abaixo, na Figura \ref{fig:qm6}, vê-se o método responsável por
passar para o \textit{layout} o endereço do \textit{site}.
				
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.5]{./imagens/2_q_metodologico/qm6.png}}
			\caption[Método para carregar o \textit{layout} com \textit{web
			view}]{Método para carregar o \textit{layout} com \textit{web
			view}.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm6}
		\end{figure}

	\par Para que as informações possam aparecer, foram criadas
\textit{activities} do tipo \textit{Blank Activity}. No \textit{layout} dessas
\textit{activities} foram inseridas o \textit{widget ExpandableListView}, como
	é mostrado na Figura \ref{fig:qm7}.
	

		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.4]{./imagens/2_q_metodologico/qm7.png}}
			\caption[\textit{Layout} com \textit{expandable}]{\textit{Layout} com
			\textit{expandable}.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm7}
		\end{figure}		
		\pagebreak
	\par A próxima etapa realizada foi o desenvolvimento do diagrama de classes do
aplicativo \textit{Android}, o qual tem por objetivo mostrar todas as classes
que o sistema necessita, como pode-se observar na Figura \ref{fig:qm7(1)}.
		
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.4]{./imagens/2_q_metodologico/qm7(1).png}}
			\caption[Diagrama de classes do aplicativo Android]{Diagrama de classes do aplicativo Android.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm7(1)}
		\end{figure}
		
%------------------------------------------------------------------------------
%------------------------------------------------------------------------------
%------------------------------------------------------------------------------
%------------------------------------------------------------------------------
%------------------------------------------------------------------------------
%------------------------------------------------------------------------------
		
	\par Foi criada uma classe chamada \texttt{BuscaDados}, que tem por finalidade
receber os dados do \textit{webservice}, salvá-los no banco de dados local do
aplicativo e entregá-los para as classes que implementam o \textit{Adapter}
para listar as informações na tela do dispositivo.
	
	\par No arquivo \texttt{AndroidManifest.xml} foi necessário alterar a opção
\texttt{Android:icon}, que define qual será o ícone do aplicativo. Por padrão,
ele apresenta o mascote do \textit{Android}, no entanto foi definida uma imagem
do logo da universidade. Foi necessário também incluir uma tag de
\texttt{uses-permission}, que obriga o usuário a permitir o uso da
\textit{internet} pelo aplicativo, conforme pode ser visto na Figura
\ref{fig:qm8}. Pode-se perceber que cada \textit{activity} encontra-se
dentro das tags \texttt{<activity><\/activity>} e que a \textit{activity main},
deve conter a tag \texttt{<intent-filter>} e dentro dela {\tiny{\texttt{<action
android:name="android.intent.action.MAIN" />}}}, indicando que
ela será a primeira a executar e {\tiny{\texttt{<category
android:name="android.intent.category.LAUNCHER" />}}}, informando que ficará
disponível junto aos outros aplicativos do dispositivo.
	
	\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.4]{./imagens/2_q_metodologico/qm8.png}}
			\caption[\texttt{AndroidManifest.xml}]{\texttt{AndroidManifest.xml}.
			 \textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm8}
		\end{figure}

	\par O \textit{Android Studio} tem uma facilidade de se trabalhar com
controladores de versão, nesse caso foi escolhido o \textit{GitHub}. Nele foi
criada uma pasta e compartilhada entre os participantes e, por fim,
configurou-se o \textit{Git} com a IDE para que cada um possa ter a versão mais
atualizada do projeto.
	
	\par No que diz respeito à contrução do \textit{webservice}, foi necessária a
instalação e configuração de um ambiente de desenvolvimento compatível com as
necessidades apresentadas pelo \textit{software} e que foram levantadas através
dos requisitos. Foi instalado o \textit{Servlet Container Apache Tomcat} em sua
versão de número 7. O \textit{Servlet Container} foi instalado para que o
\textit{Web Service} pudesse fornecer os serviços necessários para o consumo de
dados do Aplicativo \textit{Android}, haja vista que \textit{Apache tomcat} faz
uso amplo do protocolo HTTP\footnote{HTTP - Hypertext Transfer Protocol} e da
plataforma \textit{Java} de desenvolvimento.
			
		\par Para armazenar os dados gerados e/ou recebidos, foi necessário fazer a
	intalação do Sistema Gerenciador de Banco de Dados(SGBD) \textit{PostGreSql} na
	sua versão de número 9.2. Através de um levantamento de requisitos parciais e das
	reuniões entre os participantes foi possível construir um Diagrama de Entidade
	e Relacionamento, no qual ficou definida a estrutura do banco de dados da
	aplicação. A Figura \ref{fig:qm9} mostra o Diagrama de Entidade e
	Relacionamento concebido para esta pesquisa.

		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.4]{./imagens/2_q_metodologico/qm9.png}}
			\caption[Diagrama de Entidade e Relacionamento]{Diagrama de Entidade e
			Relacionamento.
			\textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm9}
		\end{figure}

		\par Fazendo uso desse diagrama foi possível criar todas as classes 
	\textit{Java} que representam as entidades do mapeamento objeto-relacional. 
	Essas classes foram criadas fazendo uso de anotações próprias do
	\textit{Hibernate}, que é um \textit{framework} que implementa a especificação
	JPA\footnote{JPA - \textit{Java Persistense API}}. Essas classes fazem parte
	dos mecanismos de persistêcia de dados e são simplesmente t ou seja, objetos
	simples que contêm somente atributos privados e os métodos \textit{getters} e
	\textit{setters} que servem apenas para encapsular estes atributos. Uma das
	classes criadas, foi a classe \texttt{Aluno.java} que representa a tabela
	\texttt{alunos} no banco de dados e está representada na Figura
	\ref{fig:qm10}.%mudar para figura
	
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.7]{./imagens/2_q_metodologico/qm10.png}}
			\caption[Classe \texttt{Aluno}]{Classe \texttt{Aluno}.
			\textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm10} 
		\end{figure}
		
		\pagebreak
		
		\par Foram criadas outras classes \textit{Java} com a mesma finalidade da
	anterior, porém com pequenas diferenças no que diz respeito à atributos,
	metodos e anotações. Estas classes representam, de maneira individual, as
	tabelas no banco de dados. Certos atributos dessas classes têm por finalidade
	representar as colunas de cada tabela. Já os atributos que armazenam instâncias
	de outras classes ou até mesmo conjuntos (coleções) de instâncias representam os
	relacionamentos entre as tabelas. E por fim, para cada classe que representa uma
	entidade, foi necessário implementar os métodos \texttt{hashCode} e
	\texttt{equals}, para que estas pudessem facilmente ser comparadas e
	diferenciadas em relação aos seus valores, haja visto que cada instância
	destas classes representa um registro no banco de dados.
		
		\par Em seguida à criação das entidades, foi necessário configurar o arquivo
	\texttt{persistence.xml} que fica dentro do \textit{classpath} do projeto
	\textit{Java} ou seja, dentro da mesma pasta onde estão contidos pacotes do
	projeto. Este arquivo é extremamente importante, pois é nele que estão todas
	as configurações relativas à conexão com o banco de dados, configurações
	referentes ao Dialeto SQL que vai ser usado para as consultas e configurações
	referentes ao \textit{persistence unit} que é o conjunto de classes mapeadas
	para o banco de dados.	O arquivo \texttt{persistence.xml} está exposto no
	código \ref{fig:qm11}.
	
 		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.6]{./imagens/2_q_metodologico/qm11.png}}
			\caption[Arquivo \texttt{persistence.xml}]{Arquivo \texttt{persistence.xml}.
			\textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm11}
		\end{figure}
		
			\par Em seguida à confecção do \texttt{persistence.xml} foi criada a
		classe \texttt{JpaUtil} que está representada na Figura \ref{fig:qm12}.
		Esta classe é responsável por criar uma \texttt{EntityManagerFactory} que é
		uma  fábrica de instâncias de \texttt{EntityManager} que nada mais é que um
		\textit{persistence unit} ou unidade de persistência. Essa classe tem a
		responsabilidade de prover um modo de comunicação entre a aplicação e o banco
		de dados. No entanto a classe \texttt{JpaUtil} cria uma única instância de
		\texttt{EntityManagerFactory}, que é responsável por disponibilizar e
		gerenciar as instâncias de \texttt{EntityManager} de acordo com a necessidade
		da aplicação.
		
		\pagebreak
		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.7]{./imagens/2_q_metodologico/qm12.png}}
			\caption[Classe \texttt{JpaUtil}]{Classe \texttt{JpaUtil}.
			\textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm12}
		\end{figure}
		
	\par Em seguida à construção das classes que fazem a parte da persistência de
dados, foi desenvolvido a parte de disponibilização de serviços
\textit{RESTful}, fazendo uso do \textit{framework} \textit{Jersey}. Com isso
pode-se construir a classe que representa o primeiro serviço do
\textit{webservice}, que é a classe \texttt{Alunos}. Essa classe representa um
contexto REST, e portanto, dispõe de alguns recursos. Esses recursos fazem a
recuperação e a transmissão dos dados do \textit{webservice} para o aplicativo
\textit{Android}. Essa classe e seus respectivos métodos  estão representada na
Figura \ref{fig:qm13}.

		\begin{figure}[h!]
			\centerline{\includegraphics[scale=0.7]{./imagens/2_q_metodologico/qm13.png}}
			\caption[Classe \texttt{AlunosService}]{Classe \texttt{AlunosService}.
			\textbf{Fonte:}Elaborado pelos autores.}
			\label{fig:qm13}
		\end{figure}
		
		\par O \textit{webservice} pode fazer a busca de alunos pelo \texttt{id}
passado ou retornar uma coleção de eventos vinculados a um alunos, dependendo
do recurso acessado. Os tipos de dados que o \textit{webservice} consome e
retorna é o JSON\footnote{JSON - \textit{Javascript Object Notation}}. Não foi
necessário fazer nenhuma implementação adicional relativa a este formato, pois
o próprio \textit{framework Jersey} faz o tratamento e a conversão dos tipos de
entrada e saída de dados. No caso do saída de dados, faz a conversão de objetos 
\textit{Java} para JSON. E no caso de entrada tranforma um JSON em objeto
\textit{Java} já conhecido pelo \textit{webservice}. Com isso concluiu-se o
desenvolvimento do \textit{webservice} que fornece os dados para o aplicativo.

	\par Os procedimentos acima citados foram os passos até agora realizados com o
propósito de se alcançar os resultados esperados para essa pesquisa.
		